{% extends 'base.html.twig' %}

{% block meta %}
    {% set page_url = absolute_url(path('get_article', {'id': article.id})) %}

    <meta name="description" content="{{ article.description }}">

    <!-- Open Graph meta tags -->
    <meta property="og:url" content="{{ page_url }}">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ article.title }}">
    <meta property="og:description" content="{{ article.description }}">
    <meta property="og:image" content="{{ absolute_url(asset('favicon.ico')) }}">

    <!-- Twitter meta tags -->
    <meta name="twitter:card" content="summary">
    <meta property="twitter:domain" content="{{ app.request.baseUrl }}">
    <meta name="twitter:url" content="{{ page_url }}">
    <meta name="twitter:title" content="{{ article.title }}">
    <meta name="twitter:description" content="{{ article.description }}">
    <meta name="twitter:image" content="{{ absolute_url(asset('favicon.ico')) }}">
    <meta name="twitter:image:alt" content="Website logo">
{% endblock %}

{% block body %}
    <div>Créé le {{ article.createdAt|date('d/m/Y') }}</div>
    {% if article.lastUpdatedAt %}
        <div>Mis à jour le {{ article.lastUpdatedAt|date('d/m/Y') }}</div>
    {% endif %}

    Catégorie : {{ article.category.name }}

    <hr>

    {% if canDelete or canEdit %}
        <div class="row">
            <div class="col-12 text-end">
                {% if canDelete %}
                    <a class="btn btn-danger" href="{{ path('delete_article', {'id': article.id}) }}">Delete</a>
                {% endif %}
                {% if canEdit %}
                    <a class="btn btn-secondary" href="{{ path('edit_article', {'id': article.id}) }}">Edit</a>
                {% endif %}
            </div>
        </div>

        <hr>
    {% endif %}

    <div class="article-content" id="article-content">{{ article.content|markdown_to_html }}</div>
{% endblock %}

{% block js %}
    <script>
        hljs.highlightAll();
        hljs.initLineNumbersOnLoad();
    </script>
{% endblock %}